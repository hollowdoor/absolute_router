!function(t){"use strict";var e="undefined"!=typeof window&&"undefined"!=typeof document&&window.URLSearchParams?function(t){for(var e={},r=new URLSearchParams(t.search).entries();;){var n=r.next();if(n.done)break;var i=n.value,o=i[0],u=i[1];e[o]=u}return e}:function(t){return t.search.length?t.search.slice(1).split("&").reduce(function(t,e){var r=e.split("="),n=r[0],i=r[1];return t[n]=i,t},{}):{}},r="undefined"!=typeof window&&"undefined"!=typeof document?window.URL?function(t,e){return/^http/.test(t)?new URL(t,e):new URL(t,window.location.origin)}:function(t){var e=document.createElement("a");return e.href=t,e}:function(t,e){var r=require("url").URL;return"/"===t[0]?new r(t,e||"http://local"):new r(t)},n=function(t){this.store=t,isNaN(t.expire)&&(t.expire=1/0),this.start=Date.now()},i={expire:{},expired:{}};i.expire.get=function(){return this.store.expire},i.expired.get=function(){return this.expire!==1/0&&Date.now()>=this.start+this.expire},n.prototype.respond=function(){this.store.respond()},Object.defineProperties(n.prototype,i),n.isView=function(t){return"object"==typeof t&&"respond"in t&&"function"==typeof t.respond};var o=function(t){void 0===t&&(t={});var e=t.parent;void 0===e&&(e={});var r=t.phrase;void 0===r&&(r="");var n=this.__info={name:r,type:"normal",parent:e,property:r,child:null,children:[]};if(e[r]=this,":"===r[0])n.type="parameter",n.property=r.slice(1),e.__info.child=r;else if("*"===r[0])n.type="splat",n.property=r.slice(1),e.__info.child=r;else if(/^\{[\s\S]+?\}[\s\S]+$/.test(r)){var i=r.match(/^\{([\s\S]+?)\}([\s\S]+)$/),o=(i[0],i[1]),u=i[2];n.type="regex",n.property=u,n.pattern=new RegExp(o),e.__info.children.push(r)}else/^[0-5]{3}/.test(r)&&(n.type="error")};o.leafFrom=function(t,e){void 0===e&&(e={});var r=e.path;void 0===r&&(r="");var n=e.handler;void 0===n&&(n=null);var i=e.type;return void 0===i&&(i=null),t.__info.type=i||t.__info.type,t.__info.handler=n,t.__info.children=[],t.__info.path=r,t},o.create=function(t){var e=t.parent,r=t.phrase;return e[r]?e[r]:new o({parent:e,phrase:r})};var u=function(){};u.prototype.constuctor=function(){this.__info={}},u.branch=function(t,e){var r=e.path,n=e.handler;if("/"===r)return t.__info={type:"root"},o.leafFrom(t,{path:r,handler:n,type:"root"});var i=r.split("/").slice(1).reduce(function(t,e){return o.create({parent:t,phrase:e})},t);return o.leafFrom(i,{path:r,handler:n})};var s=function(t,e,n,i){this.router=t,this.args=n,this.address=e,this.url=t.location=r(e,i),this.pathname=this.url.pathname,this.handler=null,this.found=!1,this.params={},t.location=this.url,this._route=null},a={route:{},views:{}};a.route.set=function(t){t&&(this._route=t,this.handler=t.__info.handler,this.found=!0,this.search=e(this.url))},a.route.get=function(){return this._route},a.views.get=function(){return this.route?this.route.__info.views:{}},s.prototype.matchRoute=function(){var t=this.router.routes,e=this.pathname;if("/"===e&&t.__info)return this.route=t,this;var r,n,i=e.split("/").slice(1),o=t,u=i.length,s=this.params,a=0,h=function(t,e){s[t.__info.property]=e},f=function(t){if(t.__info.child)return t[t.__info.child]},p=function(t,e){for(var r=t.__info.children,n=0;n<r.length;n++){var i=t[r[n]],u=(s=i,e.match(s.__info.pattern));if(u)return h(i,u),o=t[i.__info.name]}var s;return t},c=function(t){for(var e=[];a<u&&!t[i[a]];a++)e.push(i[a]);h(t,e)};for(a=0;a<u;a++){if(n=i[a],r=o,!((o=o[n])||(r.__info.children.length&&p(r,n),o=f(r))))break;"parameter"===o.__info.type?h(o,n):"splat"===o.__info.type&&c(o)}return o&&(this.route=o),this},s.prototype._getArguments=function(){return[this.params,this.search].concat(this.args)},s.prototype.runRoute=function(){if(!this.found){var t=new Error("not found");return t.status=404,Promise.reject(t)}return this.handler.apply(this.router,this._getArguments())},s.prototype.resolve=function(){var t=this;return Promise.resolve().then(function(){return t.matchRoute().runRoute()})},Object.defineProperties(s.prototype,a);var h=function(t){var e=this,r=t.relay,n=t.base;if(this["@@router"]=!0,this.routes=new u,"function"!=typeof r)throw new Error("options.relay is not a function");r({navigate:function(t,r){void 0===r&&(r=[]);return new s(e,t,r,n).resolve()}})};h.prototype.route=function(t){var e=this;return Object.keys(t).forEach(function(r){u.branch(e.routes,{path:r,handler:t[r]})}),this},h.prototype.reject=function(t,e){return function(t,e){void 0===e&&(e={});var r=new Error(""+t);return Object.keys(e).forEach(function(t){return r[t]=e[t]}),Promise.reject(r)}(t,e)},t.Router=h}(this.absoluteRouter=this.absoluteRouter||{});
//# sourceMappingURL=absolute-router.min.js.map
